<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BatchCalculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f0f0f0;
    }
    header {
      background-color: #2c3e50;
      color: white;
      padding: 1em;
      text-align: center;
      position: relative;
    }
    .tabs {
      display: flex;
      justify-content: space-around;
      background: #34495e;
    }
    .tab-button {
      flex: 1;
      padding: 1em;
      color: white;
      text-align: center;
      cursor: pointer;
      border: none;
      background: inherit;
      font-size: 1em;
    }
    .tab-button.active {
      background: #2c3e50;
    }
    .tab-content {
      display: none;
      padding: 1em;
    }
    .tab-content.active {
      display: block;
    }
    .dial-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1em;
      margin: 1em 0;
    }
    .dial {
      background: white;
      padding: 1em;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      width: 200px;
      text-align: center;
    }
    .result-table {
      display: grid;
      grid-template-columns: auto auto auto;
      gap: 0.5em 2em;
      text-align: left;
      background: white;
      padding: 1em;
      border-radius: 10px;
      max-width: 400px;
      margin: auto;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <header>BatchCalculator</header>

  <div class="tabs">
    <button class="tab-button active" onclick="showTab('mixTab')">Mix</button>
    <button class="tab-button" onclick="showTab('resultsTab')">Results</button>
    <button class="tab-button" onclick="showTab('settingsTab')">Settings</button>
  </div>

  <!-- Mix Tab -->
  <div class="tab-content active" id="mixTab">
    <div class="dial-container">
      <div class="dial">
        <label>Volume (L)</label>
        <select id="volume"></select>
      </div>
      <div class="dial">
        <label>SH %</label>
        <select id="sh"></select>
      </div>
      <div class="dial">
        <label>Surfactant</label>
        <select id="surfactant">
          <option value="0.001">1:1000</option>
          <option value="0.002">1:500</option>
          <option value="0.01">1:100</option>
          <option value="0.0133" selected>1:75</option>
          <option value="0.0167">1:60</option>
          <option value="0.02">1:50</option>
          <option value="0.025">1:40</option>
          <option value="0.0333">1:30</option>
        </select>
      </div>
      <div class="dial">
        <label>Scent</label>
        <select id="scent">
          <option value="0.001">1:1000</option>
          <option value="0.002">1:500</option>
          <option value="0.01">1:100</option>
          <option value="0.0133" selected>1:75</option>
          <option value="0.0167">1:60</option>
          <option value="0.02">1:50</option>
          <option value="0.025">1:40</option>
          <option value="0.0333">1:30</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Results Tab -->
  <div class="tab-content" id="resultsTab">
    <div id="resultsBox">Select values to see mix breakdown.</div>
  </div>

  <!-- Settings Tab -->
  <div class="tab-content" id="settingsTab">
    <div style="max-width: 400px; margin: auto;">
      <h3>Settings</h3>
      <label>Stock SH Strength (%): <input type="number" id="stockSH" value="12.5" /></label><br /><br />
      <label>SH Size (L): <input type="number" id="shSize" value="20" /></label>
      <label>Price ($): <input type="number" id="shPrice" value="80" /></label><br /><br />
      <label>Surfactant Size (L): <input type="number" id="surfactantSize" value="5" /></label>
      <label>Price ($): <input type="number" id="surfactantPrice" value="50" /></label><br /><br />
      <label>Scent Size (L): <input type="number" id="scentSize" value="5" /></label>
      <label>Price ($): <input type="number" id="scentPrice" value="50" /></label>
    </div>
  </div>

  <script>
    const volume = document.getElementById("volume");
    const sh = document.getElementById("sh");
    const surfactant = document.getElementById("surfactant");
    const scent = document.getElementById("scent");
    const resultsBox = document.getElementById("resultsBox");

    const stockSH = document.getElementById("stockSH");
    const shSize = document.getElementById("shSize");
    const shPrice = document.getElementById("shPrice");
    const surfactantSize = document.getElementById("surfactantSize");
    const surfactantPrice = document.getElementById("surfactantPrice");
    const scentSize = document.getElementById("scentSize");
    const scentPrice = document.getElementById("scentPrice");

    function populateOptions() {
      for (let i = 5; i <= 200; i += 5) {
        const opt = new Option(`${i}L`, i);
        volume.add(opt);
      }
      [500, 1000].forEach(i => volume.add(new Option(`${i}L`, i)));
      for (let i = 0.5; i <= 6; i += 0.1) {
        sh.add(new Option(`${i.toFixed(1)}%`, i.toFixed(1)));
      }
    }

    function calculate() {
      const total = parseFloat(volume.value);
      const desiredSH = parseFloat(sh.value);
      const stock = parseFloat(stockSH.value);
      const surfRatio = parseFloat(surfactant.value);
      const scentRatio = parseFloat(scent.value);

      const shVol = (desiredSH / stock) * total;
      const surfVol = surfRatio * total;
      const scentVol = scentRatio * total;
      const waterVol = total - shVol - surfVol - scentVol;

      const shC = (parseFloat(shPrice.value) / parseFloat(shSize.value)) * shVol;
      const surfC = (parseFloat(surfactantPrice.value) / parseFloat(surfactantSize.value)) * surfVol;
      const scentC = (parseFloat(scentPrice.value) / parseFloat(scentSize.value)) * scentVol;
      const totalCost = shC + surfC + scentC;

      resultsBox.innerHTML = `
        <div class="result-table">
          <div>$${shC.toFixed(2)}</div><div>SH</div><div>${shVol.toFixed(2)}L</div>
          <div>$${surfC.toFixed(2)}</div><div>Surfactant</div><div>${surfVol.toFixed(2)}L</div>
          <div>$${scentC.toFixed(2)}</div><div>Scent</div><div>${scentVol.toFixed(2)}L</div>
          <div></div><div>Water</div><div>${waterVol.toFixed(2)}L</div>
          <div>$${totalCost.toFixed(2)}</div><div><strong>Total</strong></div><div><strong>${total.toFixed(2)}L</strong></div>
        </div>
      `;
    }

    function showTab(id) {
      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
      document.getElementById(id).classList.add("active");

      document.querySelectorAll(".tab-button").forEach(btn => btn.classList.remove("active"));
      const index = { mixTab: 0, resultsTab: 1, settingsTab: 2 }[id];
      document.querySelectorAll(".tab-button")[index].classList.add("active");
    }

    window.onload = () => {
      populateOptions();
      [volume, sh, surfactant, scent, stockSH, shSize, shPrice, surfactantSize, surfactantPrice, scentSize, scentPrice].forEach(el =>
        el.addEventListener("change", calculate)
      );
      calculate();
    };
  </script>
</body>
</html>
